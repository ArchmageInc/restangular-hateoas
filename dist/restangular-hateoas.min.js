!function(a,b){"use strict";a.module("restangular-hateoas",["restangular"]).factory("hateoasApi",["Restangular",function(c){function d(a,b){var c;b=String(b).split(".");try{c=a;for(var d=0;d<b.length;d++)c=c[b[d]]}catch(e){}return c}function e(b,c,d){var e={},f=e;c=String(c).split(".");for(var g=0;g<c.length-1;g++)f[c[g]]={},f=f[c[g]];f[c[g+1]]=d,a.extend(b,e)}function f(a,b,c){return c=c||"hMap",d(a,"fieldMappings."+c+"."+b)}function g(a,c){return b.defineProperty(a,c,{enumerable:!1,configurable:!0,get:function(){var d=a.all(c).getList();return b.defineProperty(a,c,{enumerable:!1,configurable:!0,value:d.$object}),d.then(function(d){return b.defineProperty(a,c,{enumerable:!0,configurable:!0,value:d}),d}),d.$object}}),a}function h(b,c){var d={};return a.forEach(c,function(a,b){a&&"object"==typeof a&&a.getRestangularUrl&&(d[b]=a.getRestangularUrl()),"object"!=typeof a&&(d[b]=a)}),d}function i(b,c){return c[f(b,"links")]?(a.forEach(c[f(b,"links")],function(a,d){d!==f(b,"selfRef")&&g(c,d)}),c):c}function j(b,c){var d=h(b,c);return c[f(b,"$original")]?(a.forEach(d,function(a,e){e!==f(b,"$original")&&a===c[f(b,"$original")][e]&&delete d[e]}),d):d}function k(b){return function(c,d){return!d&&c[f(b,"links")]&&i(b,c),d||(c[f(b,"save")]=function(){return this.fromServer?this.patch(j(this)):this[f(b,"save","raMap")]()},c[f(b,"revert")]=function(){return this[f(b,"$original")]&&a.extend(this,a.copy(this[f(b,"$original")])),this}),c}}function l(b){return function(c,g,h,i,j){g="getList"!==g||c[f(b,"embedded")]?g:"getListOne";var k,l=c;switch(g){case"getListOne":c[f(b,"$original")]=a.copy(c),l=[c],l.falseCollection=!0;break;case"getList":a.forEach(c[f(b,"embedded")][h],function(d,e){c[f(b,"embedded")][h][e][f(b,"$original")]=a.copy(d)}),l=c[f(b,"embedded")][h];break;case"update":case"post":case"put":case"patch":k=d(l,f(b,"selfLink","raMap"))||j.headers("Location"),l=c||a.copy(j.config.data),l[f(b,"$original")]=a.copy(l),e(l,f(b,"selfLink","raMap"),k);break;case"options":case"delete":case"remove":l=void 0}return l}}function m(a){return function(b,c){switch(c){case"patch":case"update":return j(a,b);case"put":case"post":return h(a,b);case"delete":case"remove":return void 0;default:return b}}}function n(b){this.fieldMappings=a.copy(o),this.setConfiguration(b),this.setBaseUrl(this[this.fieldMappings.baseUrl]),this.setRestangularFields(this.fieldMappings.raMap),this.setOnElemRestangularized(k(this)),this.addResponseInterceptor(l(this)),this.addRequestInterceptor(m(this))}var o={hMap:{save:"save",revert:"revert",links:"_links",selfRef:"self",href:"href",baseUrl:"baseUrl",$original:"$originial",embedded:"_embedded"},raMap:{selfLink:"_links.self.href",save:"raSave"}},p=c.withConfig(function(a){a.configuration.getIdFromElem=function(a){var b=a.getRestangularUrl().match(/\/(?:.(?!\/))+$/);return b?b[0].substr(1):void 0},a.setOnBeforeElemRestangularized(function(a,b){return b&&a.falseCollection&&(a=a[0]),a})});return n.prototype=p,n.prototype.constructor=n,n}])}(angular,Object);
//# sourceMappingURL=restangular-hateoas.min.js.map