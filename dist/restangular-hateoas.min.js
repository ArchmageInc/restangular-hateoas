!function(a,b){"use strict";a.module("restangular-hateoas",["restangular"]).factory("HateoasApi",["Restangular",function(c){function d(a,b){var c;b=String(b).split(".");try{c=a;for(var d=0;d<b.length;d++)c=c[b[d]]}catch(e){}return c}function e(b,c,d){var e={},f=e;c=String(c).split(".");for(var g=0;g<c.length-1;g++)f[c[g]]={},f=f[c[g]];f[c[g+1]]=d,a.extend(b,e)}function f(a,b){if(a[g(a,"baseUrl")]=b.url,b.map){var c=a.fieldMappings.hMap,d=a.fieldMappings.raMap;for(var e in b.map)c[e]=b.map[e]||c[e];d.selfLink=c.links+c.selfRef+c.href}}function g(a,b,c){return c=c||"hMap",d(a,"fieldMappings."+c+"."+b)}function h(a,c){return b.defineProperty(a,c,{enumerable:!1,configurable:!0,get:function(){var d=a.all(c).getList();return b.defineProperty(a,c,{enumerable:!1,configurable:!0,value:d.$object}),d.then(function(d){return b.defineProperty(a,c,{enumerable:!0,configurable:!0,value:d}),d}),d.$object}}),a}function i(b,c){var d={};return a.forEach(c,function(a,b){a&&"object"==typeof a&&a.getRestangularUrl&&(d[b]=a.getRestangularUrl()),"object"!=typeof a&&(d[b]=a)}),d}function j(b,c){return c[g(b,"links")]?(a.forEach(c[g(b,"links")],function(a,d){d!==g(b,"selfRef")&&h(c,d)}),c):c}function k(b,c){var d=i(b,c);return c[g(b,"$original")]?(a.forEach(d,function(a,e){e!==g(b,"$original")&&a===c[g(b,"$original")][e]&&delete d[e]}),d):d}function l(b){return function(c,d){return!d&&c[g(b,"links")]&&j(b,c),d||(c[g(b,"save")]=function(){return this.fromServer?this.patch(k(this)):this[g(b,"save","raMap")]()},c[g(b,"revert")]=function(){return this[g(b,"$original")]&&a.extend(this,a.copy(this[g(b,"$original")])),this}),c}}function m(b){return function(c,f,h,i,j){f="getList"!==f||c[g(b,"embedded")]?f:"getListOne";var k,l=c;switch(f){case"getListOne":c[g(b,"$original")]=a.copy(c),l=[c],l.falseCollection=!0;break;case"getList":a.forEach(c[g(b,"embedded")][h],function(d,e){c[g(b,"embedded")][h][e][g(b,"$original")]=a.copy(d)}),l=c[g(b,"embedded")][h];break;case"update":case"post":case"put":case"patch":k=d(l,g(b,"selfLink","raMap"))||j.headers("Location"),l=c||a.copy(j.config.data),l[g(b,"$original")]=a.copy(l),e(l,g(b,"selfLink","raMap"),k);break;case"options":case"delete":case"remove":l=void 0}return l}}function n(a){return function(b,c){switch(c){case"patch":case"update":return k(a,b);case"put":case"post":return i(a,b);case"delete":case"remove":return void 0;default:return b}}}function o(b){this.fieldMappings=a.copy(p),f(this,b),this.setBaseUrl(this[this.fieldMappings.baseUrl]),this.setRestangularFields(this.fieldMappings.raMap),this.setOnElemRestangularized(l(this)),this.addResponseInterceptor(m(this)),this.addRequestInterceptor(n(this))}var p={hMap:{save:"save",revert:"revert",links:"_links",selfRef:"self",href:"href",baseUrl:"baseUrl",$original:"$originial",embedded:"_embedded"},raMap:{selfLink:"_links.self.href",save:"raSave"}},q=c.withConfig(function(a){a.configuration.getIdFromElem=function(a){var b=a.getRestangularUrl().match(/\/(?:.(?!\/))+$/);return b?b[0].substr(1):void 0},a.setOnBeforeElemRestangularized(function(a,b){return b&&a.falseCollection&&(a=a[0]),a})});return o.prototype=q,o.prototype.constructor=o,o}])}(angular,Object);
//# sourceMappingURL=restangular-hateoas.min.js.map